{
  "backgroundColor": "transparent",
  "borderColor": "#E0DEDE",
  "borderRadius": "0px",
  "borderWidth": "1",
  "bottomRow": 64,
  "boxShadow": "none",
  "close": "{{closeModal(MarkerDialog.name);}}",
  "defaultModel": "{\n\"data\":\"{{globalData.selectMarkerData}}\",\n\"history\":\"{{globalData.eventHistory}}\",\n\"videoUrl\":\"{{globalData.currentVideoURL}}\"\n}",
  "displayName": "自定义",
  "dynamicBindingPathList": [
    {
      "key": "theme"
    },
    {
      "key": "defaultModel"
    }
  ],
  "dynamicHeight": "FIXED",
  "dynamicPropertyPathList": [],
  "dynamicTriggerPathList": [
    {
      "key": "close"
    },
    {
      "key": "getHistory"
    },
    {
      "key": "search"
    }
  ],
  "events": [
    "close",
    "getHistory",
    "search"
  ],
  "getHistory": "{{globalData.getEventHistory(globalData.selectMarkerData.id);\nglobalData.getVideoURL(globalData.selectMarkerData.id);}}",
  "hideCard": false,
  "iconSVG": "/static/media/icon.9b1065660dedd39cf997e3faa42244bc.svg",
  "isCanvas": false,
  "isDeprecated": false,
  "isLoading": false,
  "isSearchWildcard": true,
  "isVisible": true,
  "key": "kvia0r7vwf",
  "leftColumn": 0,
  "maxDynamicHeight": 34,
  "minDynamicHeight": 4,
  "mobileBottomRow": 40,
  "mobileLeftColumn": 17,
  "mobileRightColumn": 40,
  "mobileTopRow": 10,
  "needsErrorInfo": false,
  "onCanvasUI": {
    "disableParentSelection": false,
    "focusBGCSSVar": "--on-canvas-ui-widget-focus",
    "focusColorCSSVar": "--on-canvas-ui-widget-selection",
    "selectionBGCSSVar": "--on-canvas-ui-widget-selection",
    "selectionColorCSSVar": "--on-canvas-ui-widget-focus"
  },
  "parentColumnSpace": 6.9375,
  "parentId": "byy5npx2oj",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "rightColumn": 64,
  "search": "{{globalData.getEventHistory(globalData.selectMarkerData.id, pagesize, pagenum, startTime, endTime, globalData.selectMarkerData.name);}}",
  "searchTags": [
    "external"
  ],
  "shouldScrollContents": true,
  "srcDoc": {
    "css": "iframe {\n  flex: 1;\n  margin: 40px;\n  margin-top: 0;\n}\n\n.table {\n  padding: 30px;\n  padding-top: 0;\n  padding-left: 60px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  height: 0;\n}\n.table .toolbar {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n.table .header {\n  padding: 10px 0;\n  display: flex;\n  width: calc(100% - 60px);\n  height: fit-content;\n  justify-content: space-between;\n}\n.table .header .item {\n  text-align: center;\n}\n.table .content {\n  width: calc(100% - 60px);\n  flex: 1;\n  height: 0;\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column;\n}\n.table .content .row {\n  display: flex;\n  text-align: center;\n  white-space: nowrap;\n}\n.table .content .row .item {\n  padding: 15px 0;\n}\n.table .content .row:nth-child(2n-1) {\n  background: rgba(0, 26, 68, 0.373);\n}\n\ninput[type=text] {\n  padding: 8px 12px;\n  border-radius: 4px;\n}\n\ninput[type=date] {\n  padding: 5px;\n  border-radius: 4px;\n}\n\nbutton {\n  padding: 4px 8px;\n}\n\n.pagination {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  justify-content: flex-end;\n  padding-right: 100px;\n  padding-top: 30px;\n}\n.pagination li {\n  font-size: 14px;\n  cursor: pointer;\n}\n.pagination li:nth-child(3) {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.pagination li > .number {\n  width: 40px;\n  padding: 8px 4px;\n  border-radius: 3px;\n  text-align: center;\n}\n.pagination input::-webkit-outer-spin-button,\n.pagination input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\n.pagination input[type=number] {\n  -moz-appearance: textfield;\n}\n.pagination input {\n  border: none;\n}",
    "html": "<script src=\"//cdn.bootcdn.net/ajax/libs/vue/2.6.14/vue.min.js\"></script>\n<script src=\"//cdn.bootcss.com/moment.js/2.30.1/moment.min.js\"></script>\n<link id=\"aux-style\" rel=\"stylesheet\" href=\"https://test.superton.cn/aux/aux.css\"/>\n<script src=\"https://cdn.jsdelivr.net/npm/hls.js@1\"></script>\n<div id=\"app\" class=\"event-dialog\" v-if=\"data\">\n\t<div class=\"top\">\n\t\t<div class=\"title\" v-if=\"data\">\n\t\t\t<i>{{data.name}}</i>\n\t\t\t<img  class=\"close\" @click=\"close\" src=\"http://cdn.p.superton.cn/aizhiyan/close2.png\"/>\n\t\t</div>\n\t</div>\n\t<ul class=\"tabs\">\n\t\t<li class=\"\" @click=\"changeTabs(0)\" :class=\"{active:tabIndex===0}\">实时视频</li>\n\t\t<li class=\"\" @click=\"changeTabs(1)\" :class=\"{active:tabIndex===1}\">历史事件</li>\n\t</ul>\n\t<iframe :src=\"videoURL\" v-show=\"tabIndex===0\"></iframe>\n\t<div v-show=\"tabIndex===1\" class=\"table\">\n\t\t<form class=\"toolbar\" @keydown.enter.prevent=\"search\">\n\n\t\t\t<button @click.prevent=\"quickSetTime(1)\">近一天</button>\n\t\t\t<button @click.prevent=\"quickSetTime(7)\">近七天</button>\n\t\t\t<button @click.prevent=\"quickSetTime(30)\">近三十天</button>\n\t\t\t<div style=\"display:flex;align-items:center;gap:5px\">\n\t\t\t\t<span>开始时间:</span>\n\t\t\t\t<input :max=\"endTime\" @change=\"startTimeOnChange\" type=\"date\" id=\"date_start\"/>\n\t\t\t</div>\n\t\t\t<div :disable=\"false\" style=\"display:flex;align-items:center;gap:5px\">\n\t\t\t\t<span>结束时间:</span>\n\t\t\t\t<input @change=\"endTimeOnChange\"  type=\"date\" :min=\"startTime\" id=\"date_end\"/>\n\t\t\t</div>\n\t\t\t<button type=\"submit\" @click.prevent=\"search\">搜索</button>\n\t\t\t<button type=\"submit\" @click.prevent=\"clear\">清空</button>\n\t\t</form>\n\t\t<div class=\"header\">\n\t\t\t<div class=\"item\" :style=\"{flex:getFlex(index)}\" v-for=\"(item,index) in headerList\" :key=\"index\">{{item}}</div>\n\t\t</div>\n\t\t<div class=\"content\">\n\t\t\t<div class=\"row\" v-for=\"(item,index) in eventList\" :key=\"index\">\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(0)}\">{{index+1}}</div>\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(1)}\">{{item.alarmTypeName}}</div>\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(2)}\">{{item.deviceName}}</div>\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(3)}\">{{item.alarmDate}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<form  @keydown.enter.prevent=\"topage\">\n\t\t\t<ul class=\"pagination\">\n\t\t\t\t<li v-show=\"pagenum>1\" @click=\"lastpage\">上一页</li>\n\n\t\t\t\t<li @click=\"nextpage\">下一页</li>\n\t\t\t\t<li>前往<input v-model=\"currentPage\" id=\"topagenum\" class=\"number\" type=\"number\"/>页</li>\n\t\t\t</ul></form>\n\t</div>\n\n</div>\n\n",
    "js": "appsmith.onReady(() => {\n  /*\n   * This handler function will get called when parent application is ready.\n   * Initialize your component here\n   * more info - https://docs.appsmith.com/reference/widgets/custom#onready\n   */\n  new Vue({\n    el: \"#app\",\n    data() {\n      return {\n        currentPage: 1,\n        tabIndex: 0,\n        data: null,\n        keyword: \"\",\n        videoURL: \"\",\n        headerList: [\"序号\", \"事件类型\", \"点位名称\", \"触发时间\"],\n        eventList: null,\n        pagesize: 20,\n        pagenum: 1,\n        startTime: null,\n        endTime: null\n      };\n    },\n    mounted() {\n      appsmith.onModelChange(model => {\n        this.data = JSON.parse(model.data);\n        console.log(\"history\", model.history);\n        this.getVideoURL(model.videoUrl);\n        this.eventList = JSON.parse(model.history) || [];\n        this.getVideoURL();\n      });\n    },\n    watch: {\n      tabIndex(val) {\n        if (val == 2) {\n          this.getVideoURL();\n        }\n      }\n    },\n    methods: {\n      startTimeOnChange(e) {\n        this.startTime = e.target.value;\n        console.log(\"startTimeOnChange\", e.target.value);\n      },\n      endTimeOnChange(e) {\n        this.endTime = e.target.value;\n        console.log(\"endTimeOnChange\", e.target.value);\n      },\n      clear() {\n        const start = document.getElementById(\"date_start\");\n        const end = document.getElementById(\"date_end\");\n        start.value = null;\n        end.value = null;\n        this.endTime = null;\n        this.startTime = null;\n        this.keyword = \"\";\n      },\n      quickSetTime(daynum) {\n        const start = document.getElementById(\"date_start\");\n        const end = document.getElementById(\"date_end\");\n        switch (daynum) {\n          case 1:\n            this.endTime = moment().format(\"yyyy-MM-DD\");\n            this.startTime = moment().format(\"yyyy-MM-DD\");\n            break;\n          case 7:\n            this.endTime = moment().format(\"yyyy-MM-DD\");\n            this.startTime = moment().subtract(1, \"weeks\").format(\"yyyy-MM-DD\");\n            break;\n          case 30:\n            this.endTime = moment().format(\"yyyy-MM-DD\");\n            this.startTime = moment().subtract(1, \"months\").format(\"yyyy-MM-DD\");\n            break;\n        }\n        start.value = this.startTime;\n        end.value = this.endTime;\n        this.pagenum = 1;\n        this.currentPage = 1;\n        this.search();\n      },\n      topage() {\n        this.pagenum = this.currentPage;\n        this.search();\n      },\n      lastpage() {\n        this.pagenum -= 1;\n        this.currentPage = this.pagenum;\n        this.search();\n      },\n      nextpage() {\n        this.pagenum += 1;\n        this.currentPage = this.pagenum;\n        this.search();\n      },\n      search() {\n        appsmith.triggerEvent(\"search\", {\n          keyword: this.keyword,\n          pagesize: this.pagesize,\n          pagenum: this.pagenum,\n          deviceId: this.data?.deviceId ?? -1,\n          deviceName: this.keyword,\n          startTime: this.startTime,\n          endTime: this.endTime && this.endTime + \" 23:59:59\"\n        });\n      },\n      changeTabs(index) {\n        this.tabIndex = index;\n        if (index == 1) {\n          this.eventList = [];\n          appsmith.triggerEvent(\"getHistory\", {\n            deviceId: this.data.deviceId\n          });\n        }\n      },\n      getFlex(index) {\n        switch (index) {\n          case 0:\n            return 1;\n          case 1:\n            return 2;\n          case 2:\n            return 2;\n          case 3:\n            return 2;\n        }\n      },\n      playVideo(url) {\n        var video = document.getElementById('video');\n        console.log(\"Hls\", Hls);\n        if (Hls.isSupported()) {\n          var hls = new Hls();\n          hls.loadSource(url);\n          hls.attachMedia(video);\n          hls.on(Hls.Events.MANIFEST_PARSED, function () {\n            console.log(\"MANIFEST_PARSED\");\n            video.play();\n          });\n        }\n      },\n      getVideoURL(url) {\n        if (url) {\n          this.videoURL = this.pre + encodeURIComponent(url);\n        }\n        console.log(\"this.videoURLthis.videoURL\", this.videoURL);\n      },\n      close() {\n        appsmith.triggerEvent(\"close\");\n      },\n      onSelect(e) {\n        const value = e.target.value;\n        console.log(\"onSelect\", value);\n        let handleLevel = null;\n        switch (value) {\n          case \"一级\":\n            handleLevel = 1;\n            break;\n          case \"二级\":\n            handleLevel = 1;\n            break;\n          case \"三级\":\n            handleLevel = 1;\n            break;\n        }\n        this.data.selectLevel = handleLevel;\n      },\n      falseAlarm() {\n        appsmith.triggerEvent(\"falseAlarm\", this.data);\n      },\n      levelConfirm() {\n        appsmith.triggerEvent(\"levelConfrim\", this.data);\n      },\n      deleteEvent() {\n        appsmith.triggerEvent(\"deleteEvent\", this.data);\n      }\n    }\n  });\n});"
  },
  "tags": [
    "数据展示"
  ],
  "theme": "{{appsmith.theme}}",
  "thumbnailSVG": "/static/media/thumbnail.a7d7cde44fad9a0d4d490def43560a78.svg",
  "topRow": 0,
  "type": "CUSTOM_WIDGET",
  "uncompiledSrcDoc": {
    "css": "iframe{\n\tflex:1;\n\tmargin:40px;\n\tmargin-top:0;\n}\n\n.table{\n\tpadding:30px;\n\tpadding-top:0;\n\tpadding-left:60px;\n\tdisplay:flex;\n\tflex-direction:column;\n\tflex:1;\n\theight:0;\n\t.toolbar{\n\t\tdisplay:flex;\n\t\tgap:10px;\n\t\talign-items:center\n\t}\n\t.header{\n\t\tpadding:10px 0;\n\t\tdisplay:flex;\n\t\twidth:calc(100% - 60px);\n\t\theight:fit-content;\n\t\tjustify-content:space-between;\n\t\t.item{\n\t\t\ttext-align:center\n\t\t}\n\t}\n\t.content{\n\t\twidth:calc(100% - 60px);\n\t\tflex:1;\n\t\theight:0;\n\t\toverflow-y:scroll;\n\t\tdisplay:flex;\n\t\tflex-direction:column;\n\t\t\n\t\t.row{\n\t\t\tdisplay:flex;\n\t\t\ttext-align:center;\t\n\t\t\twhite-space: nowrap;\n\t\t\t.item{\n\t\t\t\tpadding:15px 0;\n\t\t\t}\n\t\t\t&:nth-child(2n-1){\n\t\t\t\tbackground:rgba(0, 26, 68, 0.373)\n\t\t\t}\n\t\t}\n\t}\n}\n\ninput[type=\"text\"]{\n\tpadding:8px 12px;\n\tborder-radius:4px\n}\ninput[type=\"date\"]{\n\tpadding:5px;\n\tborder-radius:4px\n}\nbutton{\n\tpadding:4px 8px;\n}\n\n.pagination{\n\tdisplay:flex;\n\talign-items:center;\n\tgap:16px;\n\tjustify-content:flex-end;\n\tpadding-right:100px;\n\tpadding-top:30px;\n\tli {\n\t\tfont-size:14px;\n\t\tcursor:pointer;\n\t\t&:nth-child(3){\n\t\t\tdisplay:flex;\n\t\t\talign-items:center;\n\t\t\tgap:4px;\n\t\t}\n\t}\n\tli >.number{\n\t\twidth:40px;\n\t\tpadding: 8px 4px;\n\t\tborder-radius:3px;\n\t\ttext-align:center;\n\t}\n\n\tinput::-webkit-outer-spin-button,\n\t\tinput::-webkit-inner-spin-button {\n\t\t\t-webkit-appearance: none;\n\t}\n\tinput[type=\"number\"] {\n\t\t-moz-appearance: textfield;\n\t}\n\tinput {\n\t\tborder: none\n\t}\n\n}",
    "html": "<script src=\"//cdn.bootcdn.net/ajax/libs/vue/2.6.14/vue.min.js\"></script>\n<script src=\"//cdn.bootcss.com/moment.js/2.30.1/moment.min.js\"></script>\n<link id=\"aux-style\" rel=\"stylesheet\" href=\"https://test.superton.cn/aux/aux.css\"/>\n<script src=\"https://cdn.jsdelivr.net/npm/hls.js@1\"></script>\n<div id=\"app\" class=\"event-dialog\" v-if=\"data\">\n\t<div class=\"top\">\n\t\t<div class=\"title\" v-if=\"data\">\n\t\t\t<i>{{data.name}}</i>\n\t\t\t<img  class=\"close\" @click=\"close\" src=\"http://cdn.p.superton.cn/aizhiyan/close2.png\"/>\n\t\t</div>\n\t</div>\n\t<ul class=\"tabs\">\n\t\t<li class=\"\" @click=\"changeTabs(0)\" :class=\"{active:tabIndex===0}\">实时视频</li>\n\t\t<li class=\"\" @click=\"changeTabs(1)\" :class=\"{active:tabIndex===1}\">历史事件</li>\n\t</ul>\n\t<iframe :src=\"videoURL\" v-show=\"tabIndex===0\"></iframe>\n\t<div v-show=\"tabIndex===1\" class=\"table\">\n\t\t<form class=\"toolbar\" @keydown.enter.prevent=\"search\">\n\n\t\t\t<button @click.prevent=\"quickSetTime(1)\">近一天</button>\n\t\t\t<button @click.prevent=\"quickSetTime(7)\">近七天</button>\n\t\t\t<button @click.prevent=\"quickSetTime(30)\">近三十天</button>\n\t\t\t<div style=\"display:flex;align-items:center;gap:5px\">\n\t\t\t\t<span>开始时间:</span>\n\t\t\t\t<input :max=\"endTime\" @change=\"startTimeOnChange\" type=\"date\" id=\"date_start\"/>\n\t\t\t</div>\n\t\t\t<div :disable=\"false\" style=\"display:flex;align-items:center;gap:5px\">\n\t\t\t\t<span>结束时间:</span>\n\t\t\t\t<input @change=\"endTimeOnChange\"  type=\"date\" :min=\"startTime\" id=\"date_end\"/>\n\t\t\t</div>\n\t\t\t<button type=\"submit\" @click.prevent=\"search\">搜索</button>\n\t\t\t<button type=\"submit\" @click.prevent=\"clear\">清空</button>\n\t\t</form>\n\t\t<div class=\"header\">\n\t\t\t<div class=\"item\" :style=\"{flex:getFlex(index)}\" v-for=\"(item,index) in headerList\" :key=\"index\">{{item}}</div>\n\t\t</div>\n\t\t<div class=\"content\">\n\t\t\t<div class=\"row\" v-for=\"(item,index) in eventList\" :key=\"index\">\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(0)}\">{{index+1}}</div>\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(1)}\">{{item.alarmTypeName}}</div>\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(2)}\">{{item.deviceName}}</div>\n\t\t\t\t<div class=\"item\" :style=\"{flex:getFlex(3)}\">{{item.alarmDate}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<form  @keydown.enter.prevent=\"topage\">\n\t\t\t<ul class=\"pagination\">\n\t\t\t\t<li v-show=\"pagenum>1\" @click=\"lastpage\">上一页</li>\n\n\t\t\t\t<li @click=\"nextpage\">下一页</li>\n\t\t\t\t<li>前往<input v-model=\"currentPage\" id=\"topagenum\" class=\"number\" type=\"number\"/>页</li>\n\t\t\t</ul></form>\n\t</div>\n\n</div>\n\n",
    "js": "appsmith.onReady(() => {\n\t/*\n\t * This handler function will get called when parent application is ready.\n\t * Initialize your component here\n\t * more info - https://docs.appsmith.com/reference/widgets/custom#onready\n\t */\n\tnew Vue({\n\t\tel: \"#app\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcurrentPage:1,\n\t\t\t\ttabIndex:0,\n\t\t\t\tdata:null,\n\t\t\t\tkeyword:\"\",\n\t\t\t\tvideoURL:\"\",\n\t\t\t\theaderList:[\"序号\",\"事件类型\",\"点位名称\",\"触发时间\"],\n\t\t\t\teventList:null,\n\t\t\t\tpagesize:20,\n\t\t\t\tpagenum:1,\n\t\t\t\tstartTime:null,\n\t\t\t\tendTime:null\n\t\t\t};\n\t\t},\n\t\tmounted(){\n\n\t\t\tappsmith.onModelChange((model)=>{\n\t\t\t\tthis.data = JSON.parse(model.data)\n\t\t\t\tconsole.log(\"history\",model.history)\n\t\t\t\tthis.getVideoURL(model.videoUrl)\n\t\t\t\tthis.eventList = JSON.parse(model.history) || []\n\t\t\t\tthis.getVideoURL()\n\t\t\t})\n\t\t},\n\n\t\twatch:{\n\t\t\ttabIndex(val){\n\t\t\t\tif (val == 2){\n\t\t\t\t\tthis.getVideoURL()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tstartTimeOnChange(e){\n\t\t\t\tthis.startTime = e.target.value\n\t\t\t\tconsole.log(\"startTimeOnChange\",e.target.value)\n\t\t\t},\n\t\t\tendTimeOnChange(e){\n\t\t\t\tthis.endTime = e.target.value\n\t\t\t\tconsole.log(\"endTimeOnChange\",e.target.value)\n\t\t\t},\n\t\t\tclear(){\n\t\t\t\tconst start = document.getElementById(\"date_start\")\n\t\t\t\tconst end = document.getElementById(\"date_end\")\n\t\t\t\tstart.value = null\n\t\t\t\tend.value = null\n\t\t\t\tthis.endTime = null\n\t\t\t\tthis.startTime = null\n\t\t\t\tthis.keyword = \"\"\n\n\t\t\t},\n\t\t\tquickSetTime(daynum){\n\t\t\t\tconst start = document.getElementById(\"date_start\")\n\t\t\t\tconst end = document.getElementById(\"date_end\")\n\t\t\t\tswitch(daynum){\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tthis.endTime = moment().format(\"yyyy-MM-DD\")\n\t\t\t\t\t\tthis.startTime = moment().format(\"yyyy-MM-DD\")\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tthis.endTime = moment().format(\"yyyy-MM-DD\")\n\t\t\t\t\t\tthis.startTime = moment().subtract(1,\"weeks\").format(\"yyyy-MM-DD\")\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 30:\n\t\t\t\t\t\tthis.endTime = moment().format(\"yyyy-MM-DD\")\n\t\t\t\t\t\tthis.startTime = moment().subtract(1,\"months\").format(\"yyyy-MM-DD\")\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tstart.value = this.startTime\n\t\t\t\tend.value = this.endTime\n\t\t\t\tthis.pagenum = 1\n\t\t\t\tthis.currentPage = 1\n\t\t\t\tthis.search()\n\t\t\t},\n\t\t\ttopage(){\n\t\t\t\tthis.pagenum = this.currentPage\n\t\t\t\tthis.search()\n\t\t\t},\n\t\t\tlastpage(){\n\t\t\t\tthis.pagenum -= 1\n\t\t\t\tthis.currentPage = this.pagenum\n\t\t\t\tthis.search()\n\t\t\t},\n\t\t\tnextpage(){\n\t\t\t\tthis.pagenum += 1\n\t\t\t\tthis.currentPage = this.pagenum\n\t\t\t\tthis.search()\n\t\t\t},\n\t\t\tsearch(){\n\t\t\t\tappsmith.triggerEvent(\"search\",{\n\t\t\t\t\tkeyword:this.keyword,\n\t\t\t\t\tpagesize:this.pagesize,\n\t\t\t\t\tpagenum:this.pagenum,\n\t\t\t\t\tdeviceId:this.data?.deviceId ?? -1,\n\t\t\t\t\tdeviceName: this.keyword,\n\t\t\t\t\tstartTime:this.startTime,\n\t\t\t\t\tendTime: this.endTime && (this.endTime+\" 23:59:59\")\n\t\t\t\t})\n\t\t\t},\n\t\t\tchangeTabs(index){\n\t\t\t\tthis.tabIndex = index\n\t\t\t\tif (index == 1){\n\t\t\t\t\tthis.eventList = []\n\t\t\t\t\tappsmith.triggerEvent(\"getHistory\",{deviceId:this.data.deviceId})\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetFlex(index){\n\t\t\t\tswitch(index){\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturn 2;\n\t\t\t\t}\n\t\t\t},\n\t\t\tplayVideo(url){\n\t\t\t\tvar video = document.getElementById('video');\n\t\t\t\tconsole.log(\"Hls\",Hls)\n\t\t\t\tif(Hls.isSupported()) {\n\t\t\t\t\tvar hls = new Hls();\n\t\t\t\t\thls.loadSource(url);\n\t\t\t\t\thls.attachMedia(video);\n\t\t\t\t\thls.on(Hls.Events.MANIFEST_PARSED,function() {\n\t\t\t\t\t\tconsole.log(\"MANIFEST_PARSED\")\n\t\t\t\t\t\tvideo.play();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetVideoURL(url){\n\t\t\t\tif(url){\n\t\t\t\t\tthis.videoURL = this.pre + encodeURIComponent(url)\t\n\t\t\t\t}\n\t\t\t\tconsole.log(\"this.videoURLthis.videoURL\",this.videoURL)\n\t\t\t},\n\t\t\tclose(){\n\t\t\t\tappsmith.triggerEvent(\"close\")\n\t\t\t},\n\t\t\tonSelect(e){\n\t\t\t\tconst value = e.target.value\n\t\t\t\tconsole.log(\"onSelect\",value)\n\t\t\t\tlet handleLevel = null\n\t\t\t\tswitch(value){\n\t\t\t\t\tcase \"一级\":\n\t\t\t\t\t\thandleLevel = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase \"二级\":\n\t\t\t\t\t\thandleLevel = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase \"三级\":\n\t\t\t\t\t\thandleLevel = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tthis.data.selectLevel = handleLevel\n\t\t\t},\n\t\t\tfalseAlarm(){\n\t\t\t\tappsmith.triggerEvent(\"falseAlarm\",this.data)\n\t\t\t},\n\t\t\tlevelConfirm(){\n\t\t\t\tappsmith.triggerEvent(\"levelConfrim\",this.data)\n\t\t\t},\n\t\t\tdeleteEvent(){\n\t\t\t\tappsmith.triggerEvent(\"deleteEvent\",this.data)\n\t\t\t}\n\t\t},\n\t});\n});"
  },
  "version": 1,
  "widgetId": "6sv3ag5axc",
  "widgetName": "MarkerContainer"
}